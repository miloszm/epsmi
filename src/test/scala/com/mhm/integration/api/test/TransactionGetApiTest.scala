/**
 * Copyright (c) 2020-2021 epsmi developers (see AUTHORS)
 *
 * This file is part of binglib.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
package com.mhm.integration.api.test

import org.scalatest.FlatSpec
import org.scalatest.Matchers.convertToAnyShouldWrapper

class TransactionGetApiTest extends FlatSpec with IntTestFixture {

  "transaction get api" should "return correct transaction hex for non in-wallet transaction" in {
    val transactionHex =
      fixture.client.blockchainTransactionGet("b850bd9f727888019ddd5481124b83c17b9dd263fe4c7c007a0a6c0f4c0f1573")
    transactionHex shouldBe "0200000006c71dda1755966a42b99acb7af64d297a51f8d4df68e14b38242ecf86b386e9dd010000006b483045022100b1b670e0020508b008606e29633016a63950e88984d7ba446a3d23ed199e7914022011b15d094a36c6a8c05334d2327ad93b84ddb53ff0fd890af25c05bdbcabe64c012102c5777d16103920108b67b4c4e5c150b1eda17beee9a3bd5ea4d6de4320399b88ffffffff0308c2ae8be012ee02d85f75d10142a27bb21f21ae2c94bf711c6a8f45e57290000000006b483045022100dd22983c550f1ceecf18c66a3c7b1bf9a4a5e850134ec45d57f9eb4efacec9b902204cf03232e7e77578382d8d7caa83f3449569116c7c5e6b4456ba59d809df1f1b012102819af36558c28c1ce2af7521d3f7ef0566fa0cab2954390fe9afe4bf7d824502ffffffff3b23406e92ab1697caea52ae778e270fe436bfb2e1422dbd6f248a87ffe008bf010000006b483045022100d2e10c571186c90efc4561c408f83a93ffa74e6705c5c6c26c4ac3d663bc4cc202206c1f03502d9e319b161892e66454d91373e57362164fba0588f11a218bed590d012102c5777d16103920108b67b4c4e5c150b1eda17beee9a3bd5ea4d6de4320399b88ffffffffb4703afa7bd90fa03cc57019de37788de4683bd218dd92258ef3c199c394cc10010000006a4730440220379b2ea6977ef50d3e8a8e763edcb55542b1b947929ef942a77366b033c8872b02200acc301caaebb447bebe1064210104358ff9f7dfa4cfa9c9051e0614c6860bc9012102c5777d16103920108b67b4c4e5c150b1eda17beee9a3bd5ea4d6de4320399b88ffffffff6e5f86c06737b79a47ded9893dba21dbbef780faa810dcfaf2ce2f9d0f8dbc0a010000006b483045022100e427fc0b1c919f61e073dfb28c8f0531ec750c18ee5d55c8bfbd05d7c6b325e60220416e16e99101c52dcde35351c852bd8892c67dbd3424ffaccb2a2185ce718ad9012102c5777d16103920108b67b4c4e5c150b1eda17beee9a3bd5ea4d6de4320399b88ffffffffc2114b0feb7c360b06860bdbfd241a996180f397392935026ca2e7ca156b9063010000006a4730440220329d82f58f02f6bf8e9de59f599e520b29a41807aae200f6cebe8328d72bc4720220420c36182f9843d6448db016c4d87fa655390c7629c9cca1e414a45ab1e47fc2012102c5777d16103920108b67b4c4e5c150b1eda17beee9a3bd5ea4d6de4320399b88ffffffff02604f107e030000001976a91461c12ecae7d6d97b445d05e72d4fbda817c713ff88ac5f726302000000001976a9140fd4e05bfdcdef034b22f8cca9e1772b64ca476788ac00000000"
  }

  "transaction get api" should "return correct transaction hex for in-wallet transaction" in {
    val transactionHex =
      fixture.client.blockchainTransactionGet("22667c482f0f69daefabdf0969be53b8d539e1d2abbfc1c7a193ae38ec0d3e31")
    transactionHex shouldBe "0200000001a6f379fffe1c508fc6e6af8a4690c57eb563ed4c7b5dbda5b0b7f71695b47ae2010000008a47304402203cca6939531421295a2492ca9e2ba20114578ab0710557bcb26a994a5247d1a5022061ec836c9e6fc2a5630c44705ce682f89ce3b849e577cf49082bc3f409123478014104543ec96f67eb3ea87ff10210d5aa2a16f9468b3def6d114126aa4ecaed8c5d4e86d140fcae03f0eda4cc82263e9b5a8736d806c60e56f871a199df5fb9e630a2fdffffff0280380100000000001976a91414c45115d49cf4568d0d7229a9a0c58b64041c5388ac20700100000000001976a914642eef08604841e26f0e9519d51170bd311728df88ac66fc0900"
  }

}
